/*! itneverends - v0.0.3 - 2014-08-20
* https://github.com/osahner/jquery-itneverends
* Copyright (c) 2014 Oliver Sahner; Licensed MIT */
!function(a){var b="itneverends";_.templateSettings={evaluate:/\{\{(.+?)\}\}/gm,interpolate:/\{\{=(.+?)\}\}/gm,escape:/\{\{-(.+?)\}\}/gm},a[b]=function(b,c){var d,e={url:"",distance:15,delay:200,loadOnInit:!1,height:"400px",listTemplate:["{{ _.forEach(rows, function(row) { }}",'<li class="list-item">{{- row.name }}</li>',"{{ }); }}"].join(""),loadingTemplate:'<div class="loading"><img src="img/ajax-loader.gif" /></li>',hasMoreFunc:function(){return!1},reqParamsFunc:function(){return{}}},f=this,g=!1,h={},i=a(b);f.settings={},f.init=function(){f.settings=a.extend({},e,c),d=_.template(f.settings.listTemplate),i.wrap('<div class="itneverends-container"></div>').addClass("itneverends").css({height:f.settings.height}),i.after(f.settings.loadingTemplate),i.on("scroll",j),f.settings.loadOnInit&&i.trigger("scroll")};var j=_.throttle(function(){if(g)return!1;var b=a(this);if(b.scrollTop()+b.innerHeight()>=b[0].scrollHeight-f.settings.distance){var c=i.next();c.css({opacity:1}),g=!0,h=f.settings.reqParamsFunc(h),a.ajax({data:h,url:f.settings.url}).always(function(a){a&&b.append(d(a)),g=!1,c.css({opacity:0}),b.innerHeight()>=b[0].scrollHeight&&b.trigger("scroll"),f.settings.hasMoreFunc(a,h)||b.off("scroll",j)})}},f.settings.delay,{leading:!1});f.init()},a.fn[b]=function(c){return this.each(function(){if(void 0===a(this).data(b)){var d=new a.itneverends(this,c);a(this).data(b,d)}})}}(jQuery);