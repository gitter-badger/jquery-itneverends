<!DOCTYPE html>
<html>
<head>
  <title>jQuery-itneverends</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="jquery.itneverends.css">
  <link rel="stylesheet" href="css/site.css">
</head>
<body>
  <div class="container-fluid">
    <h1>Demo</h1>
    <div class="row">
      <div class="col-md-6">
        <div class="list-group" id="myList"></div>
        <div class="well panel-info" id="info">&nbsp;</div>
        <button class="btn btn-primary" id="reset">Reset</button>
        <button class="btn btn-success" id="toggleData">Toggle Data</button>
        <button class="btn btn-info" id="toggleTemplate">Toggle Template</button>
      </div>
    </div>
  </div>
  <script id="itneverendsTemplate" type="text/x-template">
    {{ _.forEach(rows, function(row) { }}
    <a class="list-group-item ">{{- row.name }} <span class="glyphicon glyphicon-chevron-right pull-right"></span></a>
    {{ }); }}
  </script>
  <script id="itneverendsTemplate2" type="text/x-template">
    {{ _.forEach(rows, function(row) { }}
    <a class="list-group-item ">{{- row.name }} <span class="badge">{{= Math.ceil(Math.random() * 10) }}</span></a>
    {{ }); }}
  </script>
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="jquery.itneverends.js"></script>
  <script type="text/javascript">
  $(function () {
    "use strict";
    var $myList = $('#myList'),
    $info = $('#info'),
    url1 = 'test.json',
    url2 = 'test2.json',
    _infoTpl = _.template('Showing Records {{= (pageNumber - 1) * pageSize + 1 }} to ' +
      '{{= (pageNumber - 1) * pageSize + pageSize}}' +
      ' out of {{= total }}.'),
    options = {
      loadOnInit: true,
      height: '200px',
      url: url1,
      listTemplate: $('#itneverendsTemplate').html(),
      loadingDoneFunc: function(data) {
        if (typeof data === 'object') {
          $info.html(_infoTpl(data));
        } else {
          $info.html('Error: ' + data);
        }
      }
    };

    $myList.itneverends(options);

    $('#reset').on('click', function () {
      $myList.itneverends('options', options);
    });

    $('#toggleData').on('click', function () {
      var currentUrl = $myList.itneverends().data('itneverends').settings.url;
      $myList.itneverends('options', {url: (currentUrl === url1 ? url2 : url1)});
    });
    
    $('#toggleTemplate').on('click', function () {
      $myList.itneverends('options', {listTemplate: $('#itneverendsTemplate2').html()});
    });
  });
  </script>
</body>
</html>